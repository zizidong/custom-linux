# μ»¤μ¤ν…€ λ¦¬λ…μ¤ OS

μ΄ ν”„λ΅μ νΈλ” MBR κΈ°λ°μ 2λ‹¨κ³„ λ¶€νΈλ΅λ”μ™€ μ»¤μ¤ν…€ μ»¤λ„μ„ ν¬ν•¨ν• μ™„μ „ν• μ΄μμ²΄μ μ…λ‹λ‹¤.

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

### λ¶€νΈλ΅λ”
- `bootloader.asm` - Stage 1 λ¶€νΈλ΅λ” (512λ°”μ΄νΈ MBR)
- `stage2.asm` - Stage 2 λ¶€νΈλ΅λ” (32λΉ„νΈ λ³΄νΈ λ¨λ“ μ „ν™)
- `build.bat` - λ¶€νΈλ΅λ” λΉλ“ μ¤ν¬λ¦½νΈ

### μ»¤λ„
- `kernel/` - μ»¤λ„ μ†μ¤ μ½”λ“
  - `memory.h/c` - λ©”λ¨λ¦¬ κ΄€λ¦¬ μ‹μ¤ν…
  - `interrupt.h/c` - μΈν„°λ½νΈ μ²λ¦¬ μ‹μ¤ν…
  - `scheduler.h/c` - ν”„λ΅μ„Έμ¤ μ¤μΌ€μ¤„λ¬
  - `filesystem.h/c` - νμΌ μ‹μ¤ν…
  - `kernel.c` - λ©”μΈ μ»¤λ„
  - `kernel.ld` - λ§μ»¤ μ¤ν¬λ¦½νΈ
  - `build_kernel.bat` - μ»¤λ„ λΉλ“ μ¤ν¬λ¦½νΈ

## π€ λΉλ“ λ°©λ²•

### 1. λ¶€νΈλ΅λ” λΉλ“
```cmd
build.bat
```

### 2. μ»¤λ„ λΉλ“
```cmd
cd kernel
build_kernel.bat
```

## π“‹ μ‹μ¤ν… μ”κµ¬μ‚¬ν•­

### ν•„μ λ„κµ¬
- **NASM** - μ–΄μ…λΈ”λ¬
- **GCC** - C μ»΄νμΌλ¬
- **LD** - λ§μ»¤

### μ„¤μΉ λ°©λ²•

#### NASM μ„¤μΉ
```cmd
# Chocolatey μ‚¬μ©
choco install nasm

# λλ” μ§μ ‘ λ‹¤μ΄λ΅λ“
# https://www.nasm.us/pub/nasm/releasebuilds/2.16.01/win64/nasm-2.16.01-installer-x64.exe
```

#### GCC μ„¤μΉ
```cmd
# MinGW-w64 μ„¤μΉ
choco install mingw

# λλ” MSYS2 μ‚¬μ©
# https://www.msys2.org/
```

## π”§ μ‹μ¤ν… κµ¬μ„± μ”μ†

### 1. λ©”λ¨λ¦¬ κ΄€λ¦¬ (Memory Management)
- **ν™ κ΄€λ¦¬**: First Fit μ•κ³ λ¦¬μ¦ κΈ°λ° λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή
- **νμ΄μ§•**: 4KB νμ΄μ§€ λ‹¨μ„ κ°€μƒ λ©”λ¨λ¦¬ κ΄€λ¦¬
- **λ©”λ¨λ¦¬ λ³΄νΈ**: νμ΄μ§€ λ λ²¨ μ ‘κ·Ό μ μ–΄

### 2. μΈν„°λ½νΈ μ²λ¦¬ (Interrupt Handling)
- **IDT μ„¤μ •**: μΈν„°λ½νΈ λ””μ¤ν¬λ¦½ν„° ν…μ΄λΈ” κµ¬μ„±
- **PIC μ΄κΈ°ν™”**: Programmable Interrupt Controller μ„¤μ •
- **μ‹μ¤ν… μ½**: μ‚¬μ©μ λ¨λ“μ™€ μ»¤λ„ λ¨λ“ κ°„ μΈν„°νμ΄μ¤
- **μμ™Έ μ²λ¦¬**: CPU μμ™Έ λ° μΈν„°λ½νΈ μ²λ¦¬

### 3. μ¤μΌ€μ¤„λ¬ (Scheduler)
- **λ©€ν‹°λ λ²¨ ν”Όλ“λ°± ν**: μ°μ„ μμ„ κΈ°λ° μ¤μΌ€μ¤„λ§
- **ν”„λ΅μ„Έμ¤ κ΄€λ¦¬**: ν”„λ΅μ„Έμ¤ μƒμ„±, μΆ…λ£, μƒνƒ κ΄€λ¦¬
- **μ»¨ν…μ¤νΈ μ¤μ„μΉ­**: ν”„λ΅μ„Έμ¤ κ°„ μ „ν™
- **νƒ€μ΄λ¨Έ κ΄€λ¦¬**: PIT κΈ°λ° μ‹κ°„ κ΄€λ¦¬

### 4. νμΌ μ‹μ¤ν… (File System)
- **VFS**: κ°€μƒ νμΌ μ‹μ¤ν… μΈν„°νμ΄μ¤
- **λ§μ΄νΈ κ΄€λ¦¬**: λ‹¤μ¤‘ νμΌ μ‹μ¤ν… μ§€μ›
- **νμΌ μ΅°μ‘**: μ½κΈ°, μ“°κΈ°, νƒμƒ‰, κ¶ν• κ΄€λ¦¬
- **λ””λ ‰ν† λ¦¬ κ΄€λ¦¬**: λ””λ ‰ν† λ¦¬ μƒμ„±, μ‚­μ , νƒμƒ‰

## π—οΈ μ•„ν‚¤ν…μ²

### λ¶€ν… κ³Όμ •
1. **BIOS** β†’ **Stage 1** (0x7C00)
2. **Stage 1** β†’ **Stage 2** (0x8000)
3. **Stage 2** β†’ **32λΉ„νΈ λ³΄νΈ λ¨λ“**
4. **λ³΄νΈ λ¨λ“** β†’ **μ»¤λ„** (0x100000)

### μ»¤λ„ κµ¬μ΅°
```
μ»¤λ„ (0x100000)
β”β”€β”€ λ©”λ¨λ¦¬ κ΄€λ¦¬
β”β”€β”€ μΈν„°λ½νΈ μ²λ¦¬
β”β”€β”€ ν”„λ΅μ„Έμ¤ μ¤μΌ€μ¤„λ¬
β”β”€β”€ νμΌ μ‹μ¤ν…
β””β”€β”€ μ‹μ¤ν… μ½ μΈν„°νμ΄μ¤
```

## π§ ν…μ¤νΈ λ°©λ²•

### QEMU μ‚¬μ©
```cmd
# λ¶€νΈλ΅λ”λ§ ν…μ¤νΈ
qemu-system-x86_64 -fda bootloader.bin

# μ „μ²΄ μ‹μ¤ν… ν…μ¤νΈ (μ»¤λ„ ν¬ν•¨)
qemu-system-x86_64 -kernel kernel.bin
```

### VirtualBox μ‚¬μ©
1. κ°€μƒ λ¨Έμ‹  μƒμ„±
2. λ¶€ν… λ””μ¤ν¬λ΅ λ¶€νΈλ΅λ” μ„¤μ •
3. κ°€μƒ λ¨Έμ‹  μ‹μ‘

## π” μ£Όμ” κΈ°λ¥

### λ©”λ¨λ¦¬ κ΄€λ¦¬
- β… λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή/ν•΄μ 
- β… νμ΄μ§€ κΈ°λ° κ°€μƒ λ©”λ¨λ¦¬
- β… λ©”λ¨λ¦¬ λ³΄νΈ
- β… μ •λ ¬λ λ©”λ¨λ¦¬ ν• λ‹Ή

### μΈν„°λ½νΈ μ²λ¦¬
- β… 256κ° μΈν„°λ½νΈ λ²΅ν„° μ§€μ›
- β… PIC λ§μ¤ν„°/μ¬λ μ΄λΈ μ„¤μ •
- β… μ‹μ¤ν… μ½ μΈν„°νμ΄μ¤
- β… μμ™Έ μ²λ¦¬

### ν”„λ΅μ„Έμ¤ κ΄€λ¦¬
- β… ν”„λ΅μ„Έμ¤ μƒμ„±/μΆ…λ£
- β… μ°μ„ μμ„ κΈ°λ° μ¤μΌ€μ¤„λ§
- β… ν”„λ΅μ„Έμ¤ μƒνƒ κ΄€λ¦¬
- β… μ»¨ν…μ¤νΈ μ¤μ„μΉ­

### νμΌ μ‹μ¤ν…
- β… κ°€μƒ νμΌ μ‹μ¤ν…
- β… λ‹¤μ¤‘ νμΌ μ‹μ¤ν… μ§€μ›
- β… νμΌ/λ””λ ‰ν† λ¦¬ μ΅°μ‘
- β… κ¶ν• κ΄€λ¦¬

## π› οΈ ν™•μ¥ κ°€λ¥ν• λ¶€λ¶„

### ν–¥ν›„ κ°λ° κ³„ν
- [ ] 64λΉ„νΈ λ΅± λ¨λ“ μ§€μ›
- [ ] λ©€ν‹°μ½”μ–΄ ν”„λ΅μ„Έμ„ μ§€μ›
- [ ] λ„¤νΈμ›ν¬ μ¤νƒ
- [ ] κ·Έλν”½ λ“λΌμ΄λ²„
- [ ] μ‚¬μ©μ μΈν„°νμ΄μ¤
- [ ] μ…Έ κµ¬ν„

### μ»¤μ¤ν„°λ§μ΄μ§•
- μ¤μΌ€μ¤„λ§ μ•κ³ λ¦¬μ¦ λ³€κ²½
- νμΌ μ‹μ¤ν… μ¶”κ°€
- λ””λ°”μ΄μ¤ λ“λΌμ΄λ²„ κ°λ°
- μ‹μ¤ν… μ½ ν™•μ¥

## π“ μ°Έκ³  μλ£

- [OSDev Wiki](https://wiki.osdev.org/)
- [Intel 80386 Reference Manual](https://pdos.csail.mit.edu/6.828/2018/readings/i386/toc.htm)
- [Linux Kernel Development](https://www.kernel.org/doc/)

## β οΈ μ£Όμμ‚¬ν•­

- μ΄ ν”„λ΅μ νΈλ” κµμ΅ λ©μ μΌλ΅ μ μ‘λμ—μµλ‹λ‹¤
- μ‹¤μ  ν•λ“μ›¨μ–΄μ—μ„ ν…μ¤νΈν•  λ•λ” λ°±μ—…μ„ λ°λ“μ‹ ν•μ„Έμ”
- μΌλ¶€ κΈ°λ¥μ€ κ°„λ‹¨ν• κµ¬ν„μΌλ΅ λμ–΄ μμµλ‹λ‹¤

## π“„ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” MIT λΌμ΄μ„ μ¤ ν•μ— λ°°ν¬λ©λ‹λ‹¤.
